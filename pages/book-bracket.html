<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Bracket - Reading Tools Hub</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-brand">ğŸ“š Reading Tools</a>
            <div class="nav-links">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="book-picker.html" class="nav-link">Book Picker</a>
                <a href="library-stats.html" class="nav-link">Library Stats</a>
                <a href="book-bracket.html" class="nav-link active">Book Bracket</a>
            </div>
            <div class="theme-selector">
                <button class="theme-btn" id="theme-btn" title="Change theme">ğŸ¨</button>
                <div class="theme-dropdown" id="theme-dropdown">
                    <button class="theme-option" data-theme="forest">ğŸŒ² Forest Green</button>
                    <button class="theme-option" data-theme="ocean">ğŸŒŠ Ocean Blue</button>
                    <button class="theme-option" data-theme="sunset">ğŸŒ… Sunset Peach</button>
                    <button class="theme-option" data-theme="lavender">ğŸ’œ Lavender</button>
                    <button class="theme-option" data-theme="sage">ğŸƒ Sage</button>
                    <button class="theme-option" data-theme="canary">ğŸ¤ Canary</button>
                </div>
            </div>
        </div>
    </nav>
    <script src="../assets/js/theme.js"></script>

    <div class="container">
        <!-- Page Header -->
        <header class="page-header">
            <div class="book-emoji">ğŸ†</div>
            <h1>Book Bracket</h1>
            <p class="tagline">Which book reigns supreme? You decide!</p>
        </header>

        <!-- Upload Section -->
        <section id="upload-section" class="section active">
            <h2>Upload Your Library</h2>
            
            <!-- Show if CSV already loaded -->
            <div id="csv-loaded-notice" class="csv-loaded-notice" style="display: none;">
                <p class="csv-loaded-text">âœ… CSV already loaded: <strong id="loaded-csv-name"></strong></p>
                <div class="csv-options">
                    <button id="use-existing-csv-btn" class="btn btn-primary">Start Bracket Game</button>
                    <button id="upload-different-csv-btn" class="btn btn-outline">Upload Different CSV</button>
                </div>
            </div>

            <!-- Upload zone -->
            <div id="upload-zone-container">
                <div class="upload-zone" id="upload-zone">
                    <div class="upload-icon">ğŸ“–</div>
                    <p class="upload-text">Drag & drop your CSV file here</p>
                    <p class="upload-subtext">or</p>
                    <label for="file-input" class="btn btn-primary">Choose File</label>
                    <input type="file" id="file-input" accept=".csv" hidden>
                </div>
                <p class="file-name" id="file-name"></p>
            </div>
        </section>

        <!-- Bracket Section -->
        <section id="bracket-section" class="section">
            <div class="bracket-header">
                <h2 id="bracket-title">Sweet 16 Tournament</h2>
                <div class="bracket-info">
                    <p id="bracket-source"></p>
                </div>
            </div>

            <div class="bracket-controls">
                <div class="view-toggle">
                    <button id="current-view-btn" class="toggle-view-btn active">Current Round</button>
                    <button id="full-view-btn" class="toggle-view-btn">Full Bracket</button>
                </div>
                <div class="bracket-actions">
                    <button id="download-bracket-btn" class="btn btn-secondary download-btn">
                        <span class="download-icon">ğŸ“¥</span> Download Bracket
                    </button>
                    <button id="restart-bracket-btn" class="btn btn-outline">New Bracket</button>
                </div>
            </div>

            <!-- Current Round View (default, no horizontal scroll) -->
            <div id="current-round-view" class="round-view active">
                <div id="current-round-container"></div>
            </div>

            <!-- Full Bracket View (traditional tournament bracket) -->
            <div id="full-bracket-view" class="round-view">
                <div class="bracket-scroll-hint">
                    <p>ğŸ’¡ Swipe or scroll horizontally to see all rounds â†’</p>
                </div>
                <div id="bracket-container" class="bracket-container">
                    <!-- Bracket will be generated here -->
                </div>
            </div>
        </section>

        <!-- Winner Section -->
        <section id="winner-section" class="section">
            <div class="winner-card">
                <div class="winner-emoji">ğŸ†ğŸ‘‘ğŸ‰</div>
                <h2>Your Champion!</h2>
                <div id="winner-details" class="winner-details"></div>
                <div class="winner-actions">
                    <button id="new-bracket-btn" class="btn btn-magic">Start New Bracket</button>
                    <button id="view-bracket-btn" class="btn btn-secondary">View Final Bracket</button>
                </div>
            </div>
        </section>
    </div>

    <footer class="footer">
        <p>Made with <span id="footer-heart">ğŸ’š</span> for book lovers everywhere</p>
    </footer>

    <script src="../assets/js/book-bracket.js"></script>
</body>
</html>

